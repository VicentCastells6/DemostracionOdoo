<odoo>
  <data>

    <!-- Definición del menú raíz -->
    <menuitem id="menu_demo_root" name="Demostración" />

    <!-- Vista de lista -->
    <record model="ir.ui.view" id="view_prestamo_list">
      <field name="name">prestamo.list</field>
      <field name="model">equipo.prestamo</field>
      <field name="arch" type="xml">
        <list>
          <header>
            <button 
              name="action_devolver" 
              string="Devolver" 
              type="object"
              class="oe_highlight"
              groups="base.group_user"
            />
            <button 
              name="action_cancelar_devolucion" 
              string="Cancelar Devolución" 
              type="object"
              class="btn btn-warning"
              groups="base.group_user"
            />
          </header>
          <field name="name" />
          <field name="employee_id" />
          <field name="equipment_id" />
          <field name="loanDate" />
          <field name="returnDate" />
          <field name="state" />
          <field name="description" />
          <field name="image" />
          <field name="tags" widget="many2many_tags" options="{'color_field': 'color'}" />
        </list>
      </field>
    </record>

    <!-- Vista de formulario -->
    <record model="ir.ui.view" id="view_prestamo_form">
      <field name="name">prestamo.form</field>
      <field name="model">equipo.prestamo</field>
      <field name="arch" type="xml">
        <form>
          <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <div>
              <button name="action_devolver" type="object" string="Devolver"
                class="oe_highlight btn btn-primary" invisible="state != 'prestado'" />
              <button name="action_cancelar_devolucion" type="object" string="Cancelar Devolución"
                class="btn btn-warning" invisible="state == 'prestado' or state == 'disponible'" />
            </div>
            <div style="margin-left: auto;">
              <field name="state" widget="statusbar" statusbar_visible="prestado,devuelto,retrasado" class="w-100" />
            </div>
          </div>
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" />
              </h1>
            </div>
            <group>
              <field name="employee_id" />
              <field name="equipment_id" />
              <field name="loanDate" />
              <field name="longTerm" />
              <field name="returnDate" />
              <field name="state" />
              <field name="description" />
              <field name="image" widget="image" />
              <field name="tags" widget="many2many_tags" options="{'color_field': 'color'}" />
            </group>
          </sheet>
        </form>
      </field>
    </record>
    

    <!-- Acción para la vista de préstamo -->
    <record model="ir.actions.act_window" id="action_prestamo">
      <field name="name">Préstamos</field>
      <field name="res_model">equipo.prestamo</field>
      <field name="view_id" ref="view_prestamo_list"/>
      <field name="view_mode">list,form,graph</field> 
    </record>

    <!-- Menú para los préstamos -->
    <menuitem id="menu_prestamo" name="Préstamos" parent="menu_demo_root" action="action_prestamo" />

    <!-- Vista graph -->
    <record model="ir.ui.view" id="view_prestamo_graph">
      <field name="name">prestamo.graph</field>
      <field name="model">equipo.prestamo</field>
      <field name="arch" type="xml">
        <graph string="Préstamos" type="bar">
          <field name="state" type="row"/>
          <field name="employee_id" type="row"/>
        </graph>
      </field>
    </record>

  </data>
</odoo>
